
## Основные принципы левел-дизайна для головоломок

### 1. **Метод "Расширяющегося дизайна" (как в Portal)**
- **Уровень 1:** Чистая механика — просто перетащить объект в корзину
- **Уровень 2:** Добавляем одно препятствие — стена, которую нужно обойти
- **Уровень 3:** Комбинация механик — объект + портал + корзина
- **Уровень 4:** "Твист" — неожиданное использование знакомой механики

### 2. **Трехактная структура уровня**
```python
# Структура типичной головоломки:
1. Введение (Introduction) - игрок видит цель и основные элементы
2. Осложнение (Complication) - появляются препятствия, требующие решения
3. Кульминация (Climax) - финальная сложная задача, использующая все изученное
4. Разрешение (Resolution) - удовлетворение от решения
```

## Конкретные идеи для уровней в стиле Windows

### **Уровень 1: "Рабочий стол новичка"**
- **Цель:** Перетащить 3 "файла" (кубы) в Корзину
- **Механики:** Базовая физика, перетаскивание
- **Обучение:** Скрепыш рассказывает, как брать объекты

### **Уровень 2: "Системные ошибки"**
- **Препятствие:** Появляются "ошибки" (красные зоны), которые уничтожают объекты
- **Решение:** Нужно обходить ошибки или использовать порталы
```csharp
public class ErrorZone : MonoBehaviour
{
    void OnTriggerEnter(Collider other)
    {
        if (other.CompareTag("Draggable"))
        {
            // Воспроизвести звук BSOD
            Destroy(other.gameObject);
        }
    }
}
```

### **Уровень 3: "Окна и многозадачность"**
- **Механика:** Нужно сворачивать/разворачивать окна, чтобы прокладывать путь
- **Пример:** Окно блокирует проход → сворачиваешь его → проходишь → разворачиваешь на другой стороне как мост

### **Уровень 4: "Буфер обмена"**
- **Механика:** Копирование объектов становится необходимостью
- **Пример:** Нужно 3 одинаковых объекта на 3 кнопках, но есть только 1 оригинал

## Референсы и анализ

### **Portal (основной референс)**
- **Что брать:** Постепенное введение механик
- **Пример:** Сначала порталы только на белых стенах, потом везде
- **Адаптация для вашей игры:** Сначала порталы только на "активных" поверхностях (синие стены = можно создать портал)

### **The Witness**
- **Что брать:** Обучение без слов через визуальные подсказки
- **Адаптация:** Использовать иконки Windows как визуальный язык головоломок(Можно сделать как в портал забавные знаки, связанные с обьектами головоломко, только в манере Виндовс)

### **Superliminal**
- **Что брать:** Нестандартное использование перспективы и масштаба
- **Адаптация:** "Приближение" (зум) может менять размер объектов

### **Старые квесты (Monkey Island, Grim Fandango)**
- **Что брать:** Логика "используй предмет А с предметом Б"
- **Адаптация:** "Перетащи файл .txt на программу Блокнот"

## Практический подход к проектированию

### 1. **Создайте "киты уровней" (Level Kit)**
```csharp
// Базовые префабы для быстрого прототипирования
[CreateAssetMenu]
public class LevelKit : ScriptableObject
{
    public GameObject[] wallPrefabs;
    public GameObject[] obstaclePrefabs;
    public GameObject[] interactivePrefabs;
    public AudioClip[] levelSounds;
}
```

### 2. **Система визуальных подсказок**
- **Цветовая кодировка:**
  - Синий = можно создать портал
  - Красный = опасность/ошибка
  - Зеленый = безопасная зона
- **Звуковые подсказки:** Разные звуки для правильных/неправильных действий

### 3. **Итеративный процесс создания уровня**
```
1. Бумажный прототип → 2. Блокинг в Unity → 3. Тест на друзьях → 4. Финализация
```

## Конкретный пример уровня: "Дефрагментация"

**Концепция:** Игрок должен "упорядочить файлы" в правильном порядке

```csharp
public class DefragPuzzle : MonoBehaviour
{
    public DraggableObject[] files;
    public Transform[] correctPositions;
    
    public bool CheckSolution()
    {
        for (int i = 0; i < files.Length; i++)
        {
            float distance = Vector3.Distance(files[i].transform.position, correctPositions[i].position);
            if (distance > 1f) return false;
        }
        return true;
    }
}
```

**Геймплейная последовательность:**
1. Игрок видит разбросанные "файлы" разных цветов
2. На стене - схема правильного расположения (подсказка)
3. Нужно использовать порталы, чтобы перемещать файлы через препятствия
4. Когда все файлы на месте - уровень пройден

## Советы по балансировке

- **Время решения:** Цельтесь в 2-5 минут на головоломку в начале, 5-15 в конце
- **Сложность:** Каждый уровень должен вводить ровно одну новую механику
- **Тестирование:** Давайте уровень людям, которые его не видели, и смотрите:
  - Где они застревают?
  - Какие решения придумывают?
  - Какие эмоции испытывают?

## Инструменты для левел-дизайна в Unity

1. **ProBuilder** - для быстрого моделирования уровня
2. **Cinematic Tools** - для расстановки камер и показа решений
3. **Custom Editor Tools** - для расстановки точек интереса:

```csharp
#if UNITY_EDITOR
[CustomEditor(typeof(PuzzleRoom))]
public class PuzzleRoomEditor : Editor
{
    void OnSceneGUI()
    {
        PuzzleRoom room = (PuzzleRoom)target;
        // Рисуем гизмо для визуализации логики головоломки
    }
}
#endif
```

Главное — начинайте с простого, тестируйте каждый уровень и не бойтесь переделывать! Хорошая головоломка должна вызывать "Ага!"-момент, а не фрустрацию.